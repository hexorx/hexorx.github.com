<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>CrackerSnack Articles</title>
    <meta content='Josh Robinson' name='author' />
    <link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/site.css' media='screen, projection' rel='stylesheet' type='text/css' />
    <link href='http://feeds.feedburner.com/crackersnack' rel='alternate' title='FeedBurner for CrackerSnack.com' type='application/atom+xml' />
    <script type='text/javascript'>
      //<![CDATA[
        disqus_developer = false;
      //]]>
    </script>
  </head>
  <body>
    <div id='container'>
      <a href='http://github.com/hexorx'>
        <img alt='Fork me on GitHub' src='http://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png' style='position: absolute; top: 0; right: 0; border: 0;' />
      </a>
      
      <div id='header'>
        <h1 class='title'>
          <a href='/'>CrackerSnack</a>
        </h1>
      </div>
      
      <div id='main'>
        <div id='sidebar'>
          <div class='feed-button'>
            <a href='http://feeds.feedburner.com/crackersnack'>Subscribe</a>
          </div>
          
          <div class='panel'>
            <h3>Welcome</h3>
            <p>Over the years the internet has given a lot to me. I have learned much from the internets and have had many lolz along the way.</p>
            <p>This is my attempt to give back and pass on some of what I have learned. Topics will range from Ruby to rants and include every geeky thing that pops into my head. Although my head can be a scary place I will try to keep things civil. :)</p>
            <p class='signature'>&#8212 hexorx (Josh Robinson)</p>
          </div>

          <div class='panel'>
            <h3>I'm Social</h3>
            <ul class='social'>
              <li class='github'>
                <a href='http://github.com/hexorx'>github</a>
              </li>
              <li class='twitter'>
                <a href='http://www.twitter.com/JoshRobinson'>Twitter</a>
              </li>
              <li class='facebook'>
                <a href='http://www.facebook.com/hexorx'>Facebook</a>
              </li>
              <li class='vimeo'>
                <a href='http://www.vimeo.com/hexorx'>Vimeo</a>
              </li>
              <li class='posterous'>
                <a href='http://crackersnack.posterous.com'>Posterous</a>
              </li>
            </ul>
          </div>
        </div>
        <div id='content'>
          <div class='article'>
  <div class='heading'>
    <div class='twitter'>
      <script src='http://tweetmeme.com/i/scripts/button.js' type='text/javascript'></script>
    </div>
    <h2 class='title'><a href="/articles/2010/02/19/announcing-the-currencies-gem.html">Announcing The Currencies Gem</a></h2>
    <p class='date'>&#8212 Friday, February 19, 2010</p>
  </div>
  <div class='body'>
    <p>If you are tracking any kind of assets the currencies gem is for you. It contains every currency in the ISO 4217 standard and allows you to add your own as well. So if you decide to take sparkly buttons as a form of payment you can use currencies to display the shiny button unicode symbol ☼ (disclaimer: ☼ may not look like a shiny button to everyone.) when used with something like the money gem. Speaking of the money gem, currencies gives you an ExchangeBank that the money gem can use to convert from one currency to another. There are plans to have ExchangeRate provider plugin system. Right now the rates are either set manually or pulled from Yahoo Finance.</p>

<h2 id='installation'>Installation</h2>

<p>Currencies is hosted on GemCutter, so simply run the following:</p>
<div class='highlight'><pre><code class='ruby'>  <span class='n'>gem</span> <span class='n'>sources</span> <span class='o'>-</span><span class='n'>a</span> <span class='n'>http</span><span class='ss'>:/</span><span class='o'>/</span><span class='n'>gemcutter</span><span class='o'>.</span><span class='n'>org</span>
  <span class='n'>sudo</span> <span class='n'>gem</span> <span class='n'>install</span> <span class='n'>currencies</span>
  
</code></pre>
</div>
<h2 id='basic_usage'>Basic Usage</h2>

<p>There are two ways to get a currency object. The first is to simply make it.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='s1'>&#39;USD&#39;</span><span class='p'>,</span> <span class='ss'>:name</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;Dollars&#39;</span><span class='p'>,</span> <span class='ss'>:symbol</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;$&#39;</span><span class='p'>,</span> <span class='ss'>:exchange_rate</span> <span class='o'>=&gt;</span> <span class='mi'>1</span><span class='p'>)</span>
  
</code></pre>
</div>
<p>Or you can lookup a currency by its ISO 4217 code using the <em>from_code</em> method.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>from_code</span><span class='p'>(</span><span class='s1'>&#39;USD&#39;</span><span class='p'>)</span>
  
</code></pre>
</div>
<p>Once you have a Currency instance you can get basic information about it.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='n'>currency</span> <span class='o'>=</span> <span class='no'>Currency</span><span class='o'>.</span><span class='n'>from_code</span><span class='p'>(</span><span class='s1'>&#39;USD&#39;</span><span class='p'>)</span>
  <span class='n'>currency</span><span class='o'>.</span><span class='n'>code</span> <span class='c1'>#=&gt; &quot;USD&quot;</span>
  <span class='n'>currency</span><span class='o'>.</span><span class='n'>name</span> <span class='c1'>#=&gt; &quot;Dollars&quot;</span>
  <span class='n'>currency</span><span class='o'>.</span><span class='n'>symbol</span> <span class='c1'>#=&gt; &quot;$&quot;</span>
  <span class='n'>currency</span><span class='o'>.</span><span class='n'>exchange_rate</span> <span class='c1'>#=&gt; 1.0</span>
  <span class='n'>currency</span><span class='o'>.</span><span class='n'>exchange_currency</span> <span class='c1'>#=&gt; &quot;USD&quot;</span>
  
</code></pre>
</div>
<h2 id='adding_currencies'>Adding Currencies</h2>

<p>Currencies keeps an internal list of currencies for use in the ExchangeBank and to be looked up with the <em>from_code</em> method. By default this list contains all the currencies in the ISO 4217 standard. A custom currency can be added using the <em>add</em> class method.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='n'>shiny_button</span> <span class='o'>=</span> <span class='no'>Currency</span><span class='o'>.</span><span class='n'>new</span><span class='p'>(</span><span class='s1'>&#39;SBTTN&#39;</span><span class='p'>,</span> <span class='ss'>:name</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;Buttons&#39;</span><span class='p'>,</span> <span class='ss'>:symbol</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;☼&#39;</span><span class='p'>,</span> <span class='ss'>:exchange_rate</span> <span class='o'>=&gt;</span> <span class='mi'>1000</span><span class='p'>)</span>
  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>add</span><span class='p'>(</span><span class='n'>shiny_button</span><span class='p'>)</span>
  
</code></pre>
</div>
<p>To do a massive addition of currencies you can load a yaml file using the <em>load_file</em> class method.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>load_file</span><span class='p'>(</span><span class='s1'>&#39;custom_currency.yaml&#39;</span><span class='p'>)</span>
  
</code></pre>
</div>
<p>And the yaml file should look like &#8230;</p>
<div class='highlight'><pre><code class='yaml'>  <span class='l-Scalar-Plain'>SBTTN</span><span class='p-Indicator'>:</span>
    <span class='l-Scalar-Plain'>name</span><span class='p-Indicator'>:</span> <span class='l-Scalar-Plain'>Buttons</span>
    <span class='l-Scalar-Plain'>symbol</span><span class='p-Indicator'>:</span> <span class='l-Scalar-Plain'>☼</span>
  
</code></pre>
</div>
<h2 id='defaults'>Defaults</h2>

<p>You can set the base currency by using the <em>base_currency</em> class method. This defaults to &#8216;USD&#8217;.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>base_currency</span> <span class='o'>=&gt;</span> <span class='s1'>&#39;GBP&#39;</span>
  
</code></pre>
</div>
<p>The exchange rate is either set manually or if nil looked up on Yahoo Finance and cached. If you want to disable looking up the currency set the <em>import_exchange_rates</em> class method to false.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Currency</span><span class='o'>.</span><span class='n'>import_exchange_rates</span> <span class='o'>=</span> <span class='kp'>false</span>
  
</code></pre>
</div>
<h2 id='money_gem'>Money Gem</h2>

<p>To use with the money gem you just set the default bank to the currencies bank.</p>
<div class='highlight'><pre><code class='ruby'>  <span class='no'>Money</span><span class='o'>.</span><span class='n'>default_bank</span> <span class='o'>=</span> <span class='no'>Currency</span><span class='o'>::</span><span class='no'>ExchangeBank</span><span class='o'>.</span><span class='n'>new</span>
  
</code></pre>
</div>
<p>The Currencies ExchangeBank works the same as the one in the money gem except that if an exchange rate isn&#8217;t set by default it uses what is set in the currencies gem.</p>

<h2 id='todo'>ToDo</h2>

<ul>
<li>Plugin exchange rate things</li>

<li>Add some to_currency methods</li>

<li>Add more ways to find a currency</li>

<li>Make the ExchangeBank accept Currency objects</li>
</ul>

<h2 id='sponsored_by'>Sponsored By</h2>

<p>This gem is sponsored by <a href='http://teliax.com'>Teliax</a>. <a href='http://teliax.com'>Teliax</a> makes business class Voice, <a href='http://en.wikipedia.org/wiki/Centrex'>Centrex</a>(Including Hosted: IVRs, Ring Groups, Extensions and Day Night Mode) and Data services accessible to anyone. You don&#8217;t have to be a fortune 500 to sound big!</p>

<h2 id='note_on_patchespull_requests'>Note on Patches/Pull Requests</h2>

<ul>
<li>Fork the project.</li>

<li>Make your feature addition or bug fix.</li>

<li>Add tests for it. This is important so I don&#8217;t break it in a future version unintentionally.</li>

<li>Commit, do not mess with rakefile, version, or history. (if you want to have your own version, that is fine but bump version in a commit by itself I can ignore when I pull)</li>

<li>Send me a pull request. Bonus points for topic branches.</li>
</ul>

<h2 id='copyright'>Copyright</h2>

<p>Copyright (c) 2010 hexorx. See LICENSE for details.</p>
    <div class='reddit'>
      <script src='http://www.reddit.com/button.js?t=1' type='text/javascript'></script>
    </div>
  </div>
  <div id='disqus_thread'></div>
  <script src='http://disqus.com/forums/crackersnack/embed.js' type='text/javascript'></script>
  <noscript>
    Please enable JavaScript to view the
    <a href='http://disqus.com/?ref_noscript=crackersnack'>comments powered by Disqus.</a>
  </noscript>
  <a class='dsq-brlink' href='http://disqus.com'>
    blog comments powered by
    <span class='logo-disqus'>Disqus</span>
  </a>
</div>


        </div>
      </div>
      <div id='footer'>
        <p>This website was created with <a href="http://github.com/mojombo/jekyll">Jekyll</a></p>
      </div>
    </div>
  </body>
  <script type='text/javascript'>
    //<![CDATA[
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    //]]>
  </script>
  <script type='text/javascript'>
    //<![CDATA[
      try {
        var pageTracker = _gat._getTracker("UA-13158751-1");
        pageTracker._trackPageview();
      } catch(err) {}
    //]]>
  </script>
  <script type='text/javascript'>
    //<![CDATA[
      (function() {
      	var links = document.getElementsByTagName('a');
      	var query = '?';
      	for(var i = 0; i < links.length; i++) {
      	if(links[i].href.indexOf('#disqus_thread') >= 0) {
      		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
      	}
      	}
      	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/crackersnack/get_num_replies.js' + query + '"></' + 'script>');
      })();
    //]]>
  </script>
</html>